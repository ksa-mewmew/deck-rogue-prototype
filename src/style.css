/* =========================
   Theme tokens
========================= */
:root {
  --bg: #f6f7fb;
  --panel: #ffffff;
  --text: #121417;
  --muted: #5b6472;
  --line: rgba(17, 24, 39, 0.12);

  --shadow: 0 10px 30px rgba(16, 24, 40, 0.08);
  --shadow-sm: 0 2px 10px rgba(16, 24, 40, 0.06);

  --r-lg: 16px;
  --r-md: 12px;
  --r-sm: 10px;

  --accent: #111;       /* 버튼 강조(기존 컨셉 유지) */
  --accent-soft: rgba(17, 17, 17, 0.08);

  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
  color: var(--text);
  background: var(--bg);
}

* { box-sizing: border-box; }
body { margin: 0; }

/* 살짝 여백/레이아웃 정돈 */
#app {
  padding: 18px;
  display: grid;
  gap: 12px;
  max-width: 1200px;
  margin: 0 auto;
}

.row { display: grid; gap: 12px; }
.top { grid-template-columns: 1fr 1fr; align-items: start; }

/* =========================
   Panels
========================= */
.panel {
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--r-lg);
  padding: 14px;
  box-shadow: var(--shadow-sm);
}

/* 타이포 조금 더 부드럽게 */
h2 {
  margin: 0 0 10px;
  font-size: 17px;
  font-weight: 800;
  letter-spacing: -0.02em;
}

h3 {
  margin: 0 0 8px;
  font-size: 14px;
  font-weight: 750;
  letter-spacing: -0.01em;
}

small { color: var(--muted); }

/* =========================
   Badges / Stats
========================= */
.stats {
  display: grid;
  grid-template-columns: repeat(7, max-content);
  gap: 10px 14px;
  align-items: center;
}

.badge {
  padding: 3px 9px;
  border: 1px solid rgba(17, 24, 39, 0.14);
  border-radius: 999px;
  background: rgba(17, 24, 39, 0.03);
  font-size: 12px;
  color: rgba(17, 24, 39, 0.9);
}

/* =========================
   Slots
========================= */
.grid6 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }

.slot {
  min-height: 92px;
  border: 1px dashed rgba(17, 24, 39, 0.25);
  border-radius: var(--r-md);
  padding: 10px;
  background: linear-gradient(180deg, rgba(17,24,39,0.02), rgba(17,24,39,0.01));
  display: grid;
  gap: 8px;
}

.slot.placeable {
  border-style: solid;
  border-color: rgba(17, 17, 17, 0.22);
}

.slot.dropHover {
  outline: 2px solid rgba(17,17,17,0.25);
  background: rgba(17,17,17,0.04);
}

.slot.disabled {
  opacity: .58;
  outline: 2px solid rgba(17, 24, 39, 0.20);
}

/* =========================
   Cards
========================= */
.card {
  border: 1px solid rgba(17, 24, 39, 0.14);
  border-radius: var(--r-md);
  padding: 10px;
  background: #fff;
  cursor: pointer;
  user-select: none;
  box-shadow: 0 6px 16px rgba(16, 24, 40, 0.06);
  transition: transform .08s ease, box-shadow .12s ease, border-color .12s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 24px rgba(16, 24, 40, 0.10);
}

.card.selected { outline: 2px solid rgba(17,17,17,0.65); outline-offset: 1px; }

.card.vanish { border-color: rgba(177, 17, 17, 0.55); }
.card.exhaust { border-color: rgba(17, 24, 39, 0.35); opacity: 0.96; }

.cardTitle { font-weight: 800; margin-bottom: 4px; letter-spacing: -0.01em; }
.cardMeta { display: flex; gap: 6px; flex-wrap: wrap; }

.cardText {
  font-size: 12px;
  color: rgba(17, 24, 39, 0.88);
  line-height: 1.45;
  margin-top: 6px;
  white-space: pre-wrap;
}

/* 손패: 살짝 더 여유 */
.hand {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 10px;
}

/* 드롭핸드 하이라이트 */
.hand.dropHoverHand {
  outline: 2px dashed rgba(255,160,0,0.8);
  background: rgba(255,160,0,0.06);
  border-radius: var(--r-lg);
  padding: 8px;
}

/* =========================
   Buttons / Controls
========================= */
.controls { display: flex; flex-wrap: wrap; gap: 8px; }

button {
  border: 1px solid rgba(17, 24, 39, 0.16);
  background: #fff;
  border-radius: 12px;
  padding: 9px 12px;
  cursor: pointer;
  font-family: inherit;
  font-weight: 650;
  letter-spacing: -0.01em;
  transition: transform .08s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;
}

button:hover {
  background: rgba(17,17,17,0.03);
  border-color: rgba(17,17,17,0.22);
  box-shadow: 0 10px 20px rgba(16,24,40,0.08);
  transform: translateY(-1px);
}

button:active { transform: translateY(0); box-shadow: none; }

button.primary {
  border-color: rgba(17,17,17,0.85);
  background: linear-gradient(180deg, rgba(17,17,17,0.06), rgba(17,17,17,0.02));
}

button.primary:hover {
  background: linear-gradient(180deg, rgba(17,17,17,0.10), rgba(17,17,17,0.04));
}

button:disabled {
  opacity: .55;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* =========================
   Rulebook / Choice text
========================= */
/* ✅ 룰북: 라이트 테마에 맞게 */
.rulebook {
  font-family: inherit;
  white-space: pre-wrap;
  line-height: 1.6;
  font-size: 14px;

  max-height: 60vh;
  overflow: auto;

  padding: 14px;
  border: 1px solid rgba(17, 24, 39, 0.14);
  border-radius: var(--r-lg);
  background: rgba(17, 24, 39, 0.02);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.8);
}

/* 긴 목록(덱/버림 보기)이면 버튼 텍스트가 길어지니까 보기 좋게 */
button.primary {
  text-align: left;
  line-height: 1.25;
}

/* =========================
   Log
========================= */
.log, pre.log {
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
  font-size: 12px;
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  max-height: 260px;
  overflow: auto;

  background: #0b0b0b;
  color: #e8e8e8;
  border-radius: var(--r-lg);
  padding: 12px;
  box-shadow: 0 12px 24px rgba(0,0,0,0.15);
}

/* =========================
   Divider
========================= */
hr { border: 0; border-top: 1px solid rgba(17, 24, 39, 0.10); margin: 12px 0; }
.hr { height: 1px; background: rgba(17, 24, 39, 0.10); margin: 12px 0; }


/* =========================
   Mobile / Responsive
========================= */

/* 1) 레이아웃: 모바일에서 2열 -> 1열 */
@media (max-width: 900px) {
  #app {
    padding: 12px;
    gap: 10px;
  }

  .top {
    grid-template-columns: 1fr; /* 좌/우 패널 세로 스택 */
  }

  /* 2) stats 뱃지 줄바꿈 (현재 repeat(7, max-content)가 모바일에서 터짐) */
  .stats {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
  }

  .badge {
    display: inline-flex;
    justify-content: center;
    white-space: nowrap;
  }

  /* 3) 손패: 카드 폭을 줄여서 1~2열로 안정화 */
  .hand {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 8px;
  }

  /* 4) 슬롯: 터치 편의 */
  .slot {
    min-height: 78px;
    padding: 10px;
  }

  /* 5) 버튼: 터치 타겟 키우기 */
  button {
    min-height: 44px; /* 모바일 터치 권장 크기 */
    padding: 10px 12px;
    font-size: 14px;
  }

  /* 6) 패널 간격/타이포 */
  h2 { font-size: 16px; }
  h3 { font-size: 14px; }
}

/* 2열 유지하되, 중간 폭(태블릿)에서 여백 조금만 조정 */
@media (max-width: 1100px) {
  .stats {
    grid-template-columns: repeat(4, max-content);
  }
}

/* =========================
   Sticky Combat Controls
   - ui.ts에서 controls에 "combatControls" 클래스를 추가하면 작동
========================= */
.combatControls {
  position: sticky;
  top: 10px;           /* 상단에서 살짝 띄움 */
  z-index: 20;
  padding: 10px;
  border-radius: var(--r-lg);
  background: rgba(255, 255, 255, 0.86);
  border: 1px solid rgba(17, 24, 39, 0.10);
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(10px);
}

/* 모바일에서는 상단에 딱 붙여서 조작이 더 편하게 */
@media (max-width: 900px) {
  .combatControls {
    top: 8px;
  }
}

/* =========================
   Optional: Collapsible Log
   - ui.ts에서 log wrapper에 "logPanel" / 접힘 시 "collapsed" 토글하면 작동
========================= */
.logPanel.collapsed .log,
.logPanel.collapsed pre.log {
  display: none;
}

.banner-left {
  position: sticky;
  top: 64px; /* combatControls 아래로 */
  z-index: 15;
  padding: 10px 12px;
  border-radius: var(--r-lg);
  border: 1px solid rgba(17, 24, 39, 0.12);
  background: rgba(255, 245, 230, 0.95);
}

.card { touch-action: none; }
.slot { touch-action: none; }