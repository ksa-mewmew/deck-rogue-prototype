:root{--bg0:#060708;--bg1:#0b0d10;--panel:#0f1216cc;--panel2:#0f1216f0;--line:#ffffff14;--line2:#ffffff1f;--text:#e7e9ee;--muted:#b7bdc8;--chip:#ffffff10;--chip2:#ffffff18;--shadow: 0 18px 60px rgba(0,0,0,.65);--radius:18px;--hudH: 112px;--dockH: 240px}html,body{height:100%}body{margin:0;background:radial-gradient(1200px 700px at 50% -20%,#1b1f27 0%,var(--bg0) 55%) fixed;color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans KR,Apple SD Gothic Neo,Arial;overflow:hidden}#app{height:100vh;display:flex;flex-direction:column}.panel{background:linear-gradient(180deg,#ffffff0d,#ffffff05);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}h2,h3{margin:0 0 10px;letter-spacing:.2px}h2{font-size:18px}h3{font-size:14px;color:var(--muted)}.playerHud{display:flex;align-items:flex-start;gap:14px;min-width:360px}.playerHudTitle{font-weight:700;font-size:14px;color:var(--muted);margin-bottom:6px}.playerBars{display:flex;flex-direction:column;gap:8px}.statBar{display:flex;flex-direction:column;gap:6px;min-width:320px}.statBarTop{display:flex;justify-content:space-between;font-size:12px;color:var(--muted)}.barOuter{width:340px;height:8px;border-radius:999px;border:1px solid var(--line2);background:#ffffff0f;overflow:hidden}.barFill{height:100%;border-radius:999px;filter:saturate(1.2)}.barFill.hp{background:linear-gradient(90deg,#ff5a5a,#ff2f2f)}.barFill.block{background:linear-gradient(90deg,#64b5ff,#2a7cff)}.enemyHud{flex:1;display:flex;align-items:flex-start;justify-content:center;overflow:hidden;gap:14px}.enemyChip{width:240px;min-width:200px;padding:14px;border-radius:16px;border:1px solid var(--line);background:#ffffff0a}.enemyChipTop{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);gap:10px;margin-bottom:4px}.enemyHPOuter{width:100%;height:7px;border-radius:999px;border:1px solid var(--line2);background:#ffffff0f;overflow:hidden}.enemyHPFill{height:100%;border-radius:999px;background:linear-gradient(90deg,#ff5a5a,#ff2f2f)}.enemyBadges{margin-top:4px;display:flex;flex-wrap:wrap;gap:4px}.enemyBadges .badge{font-size:12px;padding:3px 8px}.enemyIntent{color:var(--muted);line-height:1.2;margin-top:8px;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.resourceRow{display:flex;align-items:center;gap:8px;min-width:260px;justify-content:flex-end}.resourceRow.inline{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;margin-bottom:0}.chip{display:inline-flex;align-items:center;gap:6px;padding:7px 10px;border-radius:999px;border:1px solid var(--line);background:var(--chip);font-size:12px;color:var(--text)}.mainRow{flex:1;min-height:0;display:flex;gap:14px;position:relative;padding:4px 14px 12px;overflow:hidden}.stage{flex:1 1 auto;min-width:0;display:flex;align-items:stretch;width:100%;transform:none;margin-top:0}.mainPanel{width:100%;padding:16px 16px 12px;min-height:0;overflow:auto;max-height:calc(100vh - var(--hudH) - 24px);padding-bottom:calc(var(--dockH) + 18px)}.logPanel{padding:14px;min-height:0;display:flex;flex-direction:column;position:absolute;top:12px;right:14px;bottom:12px;width:360px}.logPanel .log{flex:1;min-height:0;margin:0;padding:10px;border-radius:12px;border:1px solid var(--line);background:#00000040;color:#cfd5e2;font-size:12px;line-height:1.45;overflow:auto;white-space:pre-wrap}.combatRoot{display:flex;flex-direction:column;gap:6px}.boardArea{display:flex;flex-direction:column;gap:6px;margin-top:6px}.boardArea>.grid6+.grid6{margin-top:6px}.grid6{display:grid;gap:6px;grid-template-columns:repeat(3,180px);justify-content:center}.slot{position:relative;border-radius:16px;border:1px dashed rgba(255,255,255,.12);background:#0000002e;overflow:hidden;aspect-ratio:5 / 7;height:252px;padding:10px;box-sizing:border-box}.slot.disabled{opacity:.45;filter:grayscale(1)}.slot.dropHover{border-color:#ffffff61;box-shadow:0 0 0 2px #ffffff1a inset}.slot small{color:var(--muted);font-size:11px}.slot>small{position:relative;z-index:2;opacity:.75}.slot.sWarn{border-color:#ff50508c!important;box-shadow:0 0 0 2px #ff50502e inset,0 0 22px #ff50501f}.slot.sWarn .card.inSlot{box-shadow:0 0 0 1px #ff505038 inset,0 16px 40px #0000008c}.controls{display:flex;flex-wrap:wrap;gap:8px}.controls.topClose{justify-content:flex-end}button{appearance:none;border:1px solid var(--line);background:#ffffff0f;color:var(--text);padding:8px 10px;border-radius:12px;cursor:pointer;font-size:12px}button:hover{background:#ffffff17}button:disabled{opacity:.45;cursor:not-allowed}button.primary{border-color:#ffffff29;background:#ffffff14}button.stepOn{box-shadow:0 0 0 2px #ffffff1a inset}.handDock{position:fixed;left:0;right:0;bottom:0;height:var(--dockH);padding:10px 14px 14px 18px;background:linear-gradient(180deg,#0000,#000000a6);pointer-events:none}.handDock>*{pointer-events:auto}.controlsDock{display:flex;gap:8px;justify-content:flex-start;flex-wrap:wrap;padding-left:6px;margin-bottom:10px}.hand{overflow-x:auto;overflow-y:hidden;padding-bottom:6px}.handCardsRow{display:flex;justify-content:flex-start;align-items:flex-end;gap:10px;min-width:max-content}.card{flex:0 0 auto;width:168px;border-radius:16px;border:1px solid var(--line);background:linear-gradient(180deg,#ffffff0f,#ffffff08);padding:10px 10px 8px;box-shadow:0 16px 40px #0000008c;-webkit-user-select:none;user-select:none;height:100%;display:flex;flex-direction:column}.card.selected{outline:2px solid rgba(255,255,255,.18);box-shadow:0 0 0 2px #ffffff1a inset,0 18px 60px #000000a6}.cardTitle{font-weight:800;font-size:13px;margin-bottom:6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cardMeta{display:flex;gap:6px;margin-bottom:8px}.badge{display:inline-flex;align-items:center;padding:4px 8px;border-radius:999px;font-size:11px;color:var(--muted);border:1px solid var(--line);background:#ffffff0d}.cardSection{margin-top:8px}.cardSectionTitle{font-size:11px;font-weight:700;color:var(--muted);margin-bottom:4px}.cardText{font-size:12px;line-height:1.25;color:#e9ecf3;white-space:normal;overflow:hidden;display:-webkit-box;line-clamp:6;-webkit-line-clamp:6;-webkit-box-orient:vertical;word-break:break-word;flex:1}.handEmptyHint{color:var(--muted);font-size:12px;padding:10px}.dragGhost{padding:8px 10px;border-radius:12px;border:1px solid var(--line2);background:#0a0c0fd9;color:var(--text);box-shadow:var(--shadow)}.dragLayer{pointer-events:none}.rulebook{margin:0;padding:12px;border-radius:12px;border:1px solid var(--line);background:#00000040;white-space:pre-wrap;overflow:auto;max-height:52vh}.overlayHeader{position:sticky;top:0;z-index:5;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 12px;margin-bottom:10px;border-radius:14px;border:1px solid var(--line);background:#00000040;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.overlayTitle{margin:0}.overlayClose{margin-left:auto}.handDock .card{width:132px;height:178px}.slot .card{width:100%;height:100%}.card.inSlot{position:absolute;inset:28px 10px 10px;width:auto;height:auto;margin:0;box-sizing:border-box;border-radius:14px;overflow:hidden;pointer-events:auto;z-index:1;display:flex;flex-direction:column;min-height:0;padding:8px}.card.inSlot .cardTitle{font-size:13px;font-weight:800;line-height:1.25;margin-bottom:4px;padding-top:0}.card.inSlot .cardMeta{margin-bottom:6px}.card.inSlot .badge{line-height:1.1;padding:3px 7px}.card.inSlot .cardText{flex:1 1 auto;min-height:0;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;white-space:normal;word-break:break-word;line-height:1.2;opacity:.9}.card.inSlot .cardSection{margin-top:6px}.card.inSlot .cardSectionTitle{font-size:11px;opacity:.9;margin-bottom:2px}.panelHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px}.battleTitleRow{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:12px;margin-bottom:6px;padding-bottom:0;padding-top:6px}.battleTitleRow h2{line-height:1.2;padding-top:2px;margin:0}.hpBar{height:12px;border-radius:999px;overflow:hidden}.hpFill{height:100%}.slotBox{aspect-ratio:5 / 7;width:100%;max-width:320px}.battleSlotsGrid{display:grid;grid-template-columns:repeat(3,minmax(180px,1fr));gap:12px;justify-items:center}.targetHint{padding:8px 10px;border-radius:12px;border:1px solid rgba(255,80,80,.45);background:#ff50501f;color:#ffd9d9;font-size:12px;margin-bottom:10px}.enemyChip.targetable{border-color:#ff50508c;box-shadow:0 0 0 1px #ff50502e inset,0 10px 26px #0000008c;cursor:pointer}.enemyChip.targetable:hover{border-color:#ff5050d9;box-shadow:0 0 0 2px #ff505038 inset,0 0 18px #ff3c3c38,0 14px 32px #0009}.enemyChip.targetSelected{border-color:#ff5050f2;box-shadow:0 0 0 2px #ff50504d inset,0 0 22px #ff3c3c47,0 18px 40px #000000a6}.chip.warn{border-color:#ff50508c;background:#ff50501a;box-shadow:0 0 0 2px #ff50501a inset,0 0 18px #ff50501a;color:#ffd6d6}.pileButtons{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-start}.pileButtons button{padding:6px 8px;border-radius:999px;font-size:12px}.choiceCard{transform:scale(.92);transform-origin:top left}.nextPreviewBox{margin-top:10px;padding:10px 12px;border:1px solid rgba(255,255,255,.1);border-radius:14px;background:#ffffff08}.nextPreviewTitle{font-size:12px;opacity:.8;margin-bottom:8px}.nextPreviewLine{display:flex;gap:10px;align-items:center;margin:6px 0}.nextPreviewSide{min-width:40px;font-size:12px;opacity:.75}.nextPathRow{display:flex;align-items:center;gap:10px;flex-wrap:wrap}.nextPathArrow,.nextPathSlash{opacity:.6;font-weight:700}.nextPathChoices{display:flex;align-items:center;gap:10px}.nodePill{padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:#0000002e;font-size:13px;white-space:nowrap}.nodePill.picked{border-color:#fff3;background:#ffffff0f;font-weight:700}.enemyChip.shake{animation:enemyHitShake .14s linear}@keyframes enemyHitShake{0%{transform:translate(0)}20%{transform:translate(-4px)}40%{transform:translate(4px)}60%{transform:translate(-2px)}80%{transform:translate(2px)}to{transform:translate(0)}}.topHud{display:flex;gap:16px;align-items:stretch}.playerHudLeft{display:flex;flex-direction:column;align-self:center;gap:10px;min-width:260px}.playerTitleRow{display:flex;align-items:center;justify-content:space-between;gap:12px}.pileButtons{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}.playerHudLeft{position:fixed;left:16px;top:50vh;transform:translateY(-50%);z-index:1200;display:flex;flex-direction:column;gap:10px;width:280px;max-width:34vw}.playerTitleRow{display:flex;align-items:center;gap:12px}.pileButtons{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}.topHud{display:grid;grid-template-columns:var(--playerHudW, 370px) 1fr auto;align-items:start;gap:16px}.topHudLeftSpacer{width:var(--playerHudW, 300px);height:1px}:root{--playerHudW: 130px}.playerHudLeft{position:fixed;left:16px;top:50vh;transform:translateY(-50%);z-index:1200;width:var(--playerHudW);max-width:36vw;display:flex;flex-direction:column;gap:10px}.playerTitleRow{display:flex;align-items:center;gap:12px;flex-wrap:nowrap;white-space:nowrap}.pileButtons{margin-left:auto;display:flex;gap:8px;flex-wrap:nowrap;white-space:nowrap;overflow-x:auto}.pileButtons::-webkit-scrollbar{height:6px}:root{--playerHudW: 360px;--topHudPadT: 10px;--stageDrop: 14px;--enemyHudMaxW: min(900px, 56vw)}.topHud{display:grid;grid-template-columns:var(--playerHudW) 1fr auto;align-items:start;column-gap:18px;padding-top:var(--topHudPadT)}.topHudLeftSpacer{width:var(--playerHudW);height:1px}.enemyHudCenter{justify-self:center;width:min(100%,var(--enemyHudMaxW))}.enemyHud{display:flex;justify-content:center;flex-wrap:wrap;gap:10px}.mainRow{margin-top:var(--stageDrop)}.enemyChip{width:320px;max-width:360px}@media(max-width:1400px){.enemyChip{width:300px}}@media(max-width:1200px){.enemyChip{width:280px}}.playerHudLeft{position:fixed;left:16px;top:52vh;transform:translateY(-50%);z-index:1200;width:var(--playerHudW);max-width:36vw;display:flex;flex-direction:column;gap:10px}.playerTitleRow{display:flex;align-items:center;gap:10px;flex-wrap:nowrap;white-space:nowrap}.playerHudTitle{font-size:14px;opacity:.9}.pileButtons{margin-left:auto;display:flex;gap:6px;flex-wrap:nowrap;white-space:nowrap}.pileButtons button{padding:6px 10px;font-size:12px}.playerHudBox{padding:9px;border-radius:16px}.enemyHPOuter{height:8px}.enemyChipTop{font-size:13px}:root{--topCenterNudgeX: 0px}.enemyHudCenter{justify-self:center;transform:translate(var(--topCenterNudgeX))}.topHud{display:grid;grid-template-columns:1fr auto 1fr;align-items:start;column-gap:16px;padding:16px 24px}.playerHudLeft{justify-self:start}.enemyHudCenter{justify-self:center}.enemyNone{text-align:center}.previewPickBox{border:1px solid rgba(255,255,255,.1);border-radius:14px;padding:12px;background:#ffffff08;margin-top:12px}.previewTitle{opacity:.85;margin-bottom:10px}.previewRow{display:flex;align-items:center;gap:10px;padding:10px;border-radius:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.previewRow:hover{background:#ffffff0a;border:1px solid rgba(255,255,255,.06)}.previewRow:focus{outline:2px solid rgba(255,255,255,.18);outline-offset:2px}.previewRowLabel{width:56px;opacity:.85}.previewPills{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.nodePill{display:inline-flex;align-items:center;justify-content:center;width:72px;height:34px;border-radius:999px;border:1px solid rgba(255,255,255,.14);background:#0000002e;font-weight:600}.previewArrow,.previewSlash{opacity:.5;padding:0 2px}.nodePickBtn{display:flex;flex-direction:column;align-items:flex-start;gap:8px;padding:14px;min-width:260px}.nodePickTop{display:flex;gap:8px;align-items:center}.nodePickMid{opacity:.55;margin-left:6px}.nodePickBottom{display:flex;gap:8px;align-items:center}.nodePickSep{opacity:.35}.nodePickDim{opacity:.45;font-size:12px}.nodePill{display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.14);background:#ffffff0f;min-width:64px;text-align:center;white-space:nowrap;font-size:12px}button{appearance:none;border:1px solid rgba(255,255,255,.12);background:#ffffff0f;color:#ffffffeb;border-radius:14px;padding:10px 14px;font-size:14px;line-height:1;cursor:pointer;transition:transform .08s ease,background .15s ease,border-color .15s ease,box-shadow .15s ease,opacity .15s ease;box-shadow:0 6px 18px #00000059}button:hover{background:#ffffff1a;border-color:#fff3;transform:translateY(-1px)}button:active{transform:translateY(0);background:#ffffff14}button:disabled{opacity:.38;cursor:not-allowed;transform:none;box-shadow:none}.stepBtn{padding:10px 12px;border-radius:999px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1)}.pileButtons button{padding:8px 10px;border-radius:999px;font-size:13px;background:#ffffff0b}.pileButtons button:hover{background:#ffffff16}.choice-item button.primary{width:fit-content;min-width:120px}.controls button.primary{min-width:120px;justify-content:center;text-align:center}.controls{display:flex;gap:12px;flex-wrap:wrap}button:before{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;background:radial-gradient(120% 80% at 20% 10%,rgba(255,255,255,.1),transparent 55%);opacity:.9}button{position:relative;overflow:hidden}button:focus{outline:none}button:focus-visible{outline:2px solid rgba(255,255,255,.22);outline-offset:2px}.mainPanel{margin-top:30px}#app{min-height:100vh;display:flex;flex-direction:column}.mainRow{flex:1;display:flex;gap:12px;min-height:0}.stage{flex:1;min-width:0;display:flex}.mainPanel{flex:1;min-height:0;padding-bottom:220px}:root{--topHudH: 120px;--dockH: 260px;--uiGap: 24px}.mainRow{height:calc(100vh - var(--topHudH) - var(--dockH) - var(--uiGap));align-items:stretch}.stage,.stageInner{height:100%}.panel.mainPanel,.panel.logPanel{height:100%;overflow:auto}:root{--hudH: 112px;--dockH: 240px}.topHud{display:grid;grid-template-columns:280px 1fr 280px;gap:12px;align-items:start;padding:6px 14px 2px;box-sizing:border-box;margin:0 0 4px}.playerHudLeft{display:flex;flex-direction:column;gap:10px;min-width:260px}.enemyHudCenter{justify-self:center;width:min(760px,100%);max-height:92px;overflow:hidden}.topHudRight{justify-self:end}.topRightControls{display:flex;gap:8px;justify-content:flex-end}.mainRow{flex:1;min-height:0;display:flex;gap:14px;padding:4px 14px 12px;padding-bottom:calc(var(--dockH) + 12px);box-sizing:border-box;overflow:hidden}.stage{flex:1 1 auto;min-width:0;display:flex;align-items:stretch}.stageInner{width:100%;margin:0 auto;display:flex;align-items:stretch;max-width:760px}.mainPanel{width:100%;min-height:0;overflow:auto;padding:16px 16px 12px;box-sizing:border-box;height:100%;max-height:none}.logPanel{width:360px;padding:14px;min-height:0;display:flex;flex-direction:column}.logPanel .log{flex:1;min-height:0;overflow:auto}:root{--dockH: 240px;--uiGap: 16px}:root{--topHudH: 112px}.mainRow{height:calc(100vh - var(--topHudH) - var(--dockH) - var(--uiGap));min-height:0;overflow:hidden;padding-bottom:12px}.stage,.stageInner,.mainPanel,.logPanel{height:100%}.mainPanel{overflow:auto;padding-bottom:calc(var(--dockH) + 16px);box-sizing:border-box}.playerStatsRow{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;align-items:center}.playerHudLeft .playerStatsRow .chip{background:#ffffff0f}.dragCardPreview{position:fixed;z-index:2200;pointer-events:none;transform:translateZ(0);filter:drop-shadow(0 18px 50px rgba(0,0,0,.65));opacity:.96}.dragCardPreview .card{transform:scale(1);transform-origin:top left}:root{--handCardW: 132px;--handCardH: 178px}.card.isDraggingSource{filter:brightness(.78) saturate(.9);opacity:.65;box-shadow:none}.dragCardPreview{width:var(--handCardW);height:var(--handCardH);pointer-events:none}.dragCardPreview .card{width:100%;height:100%;filter:brightness(1.06) saturate(1.08);transform:translateZ(0) scale(1.02);box-shadow:0 22px 70px #000000bf}
